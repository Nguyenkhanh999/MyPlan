(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39],{gSXv:function(e,t,a){"use strict";a.d(t,"a",(function(){return Nt}));var s,n=a("MM9K"),i=a.n(n),r=a("a3Uq"),c=a.n(r),o=a("N9UN"),l=a.n(o),d=a("RWbP"),m=a.n(d),j=a("CC+v"),h=a.n(j),p=a("nKUr"),u=a("aOJk"),b=a.n(u),g=a("pWf2"),O=a.n(g),v=a("4IMT"),x=a.n(v),f=a("q1tI"),y=a.n(f),_=a("Pbn2"),N=a.n(_),w=a("EQeY"),k=a.n(w),C=a("1OyB"),A=a("vuIU"),R=a("JX7q"),P=a("Ji7U"),S=a("md7G"),I=a("foSv"),M=a("rePB"),T=a("qPyV"),z=a.n(T),B=a("BkRI"),E=a.n(B),L=a("JeI0"),F=a.n(L),D=a("Qi1R"),W=a("tgtK"),H=a("Dmaw"),X=a("Dt70"),V=a("JLNj"),q=a.n(V),U=a("EOzy"),G=a("wd/R"),Z=a.n(G),J=a("DgQE"),Y=a.n(J),K=a("1aHf"),Q=a.n(K),$=a("VMFd"),ee=a.n($),te=a("ZPf0"),ae=a.n(te),se=a("TJVi"),ne=a.n(se),ie=a("EvYk"),re=a.n(ie),ce=a("IK3+"),oe=a.n(ce),le=a("D6SI"),de=a.n(le),me=a("v/+Y"),je=a.n(me),he=a("6lA5"),pe=a.n(he),ue=a("QL3T"),be=a.n(ue),ge=a("KnaY"),Oe=a.n(ge),ve=a("+BdP"),xe=a.n(ve),fe=a("vPHM"),ye=a.n(fe),_e=a("sb+P"),Ne=a.n(_e),we=a("FbZl"),ke=a.n(we),Ce=a("b2gG"),Ae=a.n(Ce),Re=a("ckxj"),Pe=a("JXUh"),Se=a.n(Pe),Ie=a("9kay"),Me=a("A3xh"),Te=a("/4mG"),ze=a.n(Te),Be=a("isrb"),Ee=a.n(Be),Le=a("R8u0"),Fe=a.n(Le),De=a("0++K"),We=a("589l"),He=a("aca6"),Xe=a("mVNA"),Ve=a("NRbx"),qe=a("99A7"),Ue=a("Xf3A"),Ge=a("Vol9"),Ze=a("cvKu"),Je=a("42Pg"),Ye=a("34Rb"),Ke=a("aKL0"),Qe=a("ALrz"),$e=a("f0aU"),et=a("8+nE"),tt=a("LaJG"),at=a("RDl5"),st=a("P1py"),nt=a("pmYg"),it=a("QNHz"),rt=a("Wk6l"),ct=a("z7+I"),ot=a("MuQX"),lt=a("pkaa"),dt=a("XA2q"),mt=a("BUpc"),jt=a("X1/t"),ht=a("jdN3"),pt=a("A+7O"),ut=a("TlwN");function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,s=Object(I.a)(e);if(t){var n=Object(I.a)(this).constructor;a=Reflect.construct(s,arguments,n)}else a=s.apply(this,arguments);return Object(S.a)(this,a)}}function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(a),!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt=[{emoji:"\ud83d\udc4d",reaction:"/-strong"},{emoji:"\u2764\ufe0f",reaction:"/-heart"},{emoji:"\ud83e\udd23",reaction:":>"},{emoji:"\ud83d\ude2e",reaction:":o"},{emoji:"\ud83d\ude2d",reaction:":-(("},{emoji:"\ud83d\ude21",reaction:":-h"}],xt=new q.a.Parser(y.a),ft=new q.a.ProcessNodeDefinitions(y.a),yt=function(){return!0},_t=function(e){return[{shouldProcessNode:function(e){return!0},processNode:function(t,a){if("copy"===t.name){var s=function(e){var t={};for(var a in e)e[a],t[a]=e[a];return t}(Ot(Ot({},t.attribs),{},{isPhoneNumber:!0,fromCustomer:e}));return y.a.createElement(U.a,s,y.a.createElement(t.name,null,a))}return"\ufe0f<"==t.name?y.a.createElement("span",null,"<"):ft.processDefaultNode(t,a)}}]},Nt=Object(Ie.b)()(s=function(e){Object(P.a)(a,e);var t=bt(a);function a(e){var s;return Object(C.a)(this,a),s=t.call(this,e),Object(M.a)(Object(R.a)(s),"loadListContact",(function(){var e=s.props,t=e.pages.currentPageId,a=e.auth,n="".concat(Object(D.Mb)(),"/v1/pages/").concat(t,"/whatsapp/contacts?access_token=").concat(a.accessToken,"&is_forwarding=",!0);Object(D.lc)(n)})),Object(M.a)(Object(R.a)(s),"handleClickStartForwardMessageFollow",(function(e,t){var a=s.props,n=a.dispatch,i=a.pages;n(Object(Qe.y)({pageId:i.currentPageId,isCreatingConversation:!1,isForwardingMessage:!0,selectedMessageIds:[e]})),s.loadListContact()})),Object(M.a)(Object(R.a)(s),"renderMorePhoto",(function(e){var t=s.props,a=t.pageId,n=t.auth,i=(t.currentPlatform,t.postType),r=t.id,c=E()(e);return c.splice(0,1),Object(p.jsx)("div",{style:{display:"flex"},children:c.map((function(e){var t=e.url||Object(D.kd)(a,e.target&&e.target.id||e.id,n.accessToken);return"rating"==i&&(t+="&comment_id=".concat(r)),Object(p.jsx)("div",{className:"photos-extend",children:Object(p.jsx)("img",{src:t,width:30,height:30})})}))})})),Object(M.a)(Object(R.a)(s),"getMediaBodyTextWidth",(function(){var e=0,t=document.getElementById("messageCol");t&&(e=.75*t.clientWidth);return e})),Object(M.a)(Object(R.a)(s),"renderProductAttachment",(function(e){if(!e)return null;var t=e.images||[],a=e.variations||[];return Object(p.jsx)(ut.a,{id:e.variation_id||e.id,name:e.name,stock:e.stock,currency:e.currency,images:t,variations:a,link:e.link,t:s.props.t})})),Object(M.a)(Object(R.a)(s),"renderLeveraTicket",(function(e,t){var a=s.props,n=a.t,i=a.shopId;return e||t?Object(p.jsx)("div",{className:"levera-attachment",children:Object(p.jsxs)("div",{className:"levera-attachment-item",children:[Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{className:"levera-label limit-text",children:"Ph\u1ea3n h\u1ed3i v\u1ec1 \u0111\u01a1n h\xe0ng"}),Object(p.jsx)(k.a,{style:{marginRight:0},color:"volcano",children:Object(D.Pb)(t)})]}),Object(p.jsx)("div",{className:"levera-divider header-divider"}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"M\xe3 \u0111\u01a1n h\xe0ng"}),Object(p.jsx)(mt.a,{placement:"topRight",title:n("conversation.recentOrder.viewOrderDetail"),children:Object(p.jsx)("div",{style:{fontWeight:600},onClick:function(){var t=Object(D.Mb)(!0).replace("/api","");return window.open("".concat(t,"/shop/").concat(i,"/order?order_id=").concat(e.id))},children:e.display_id})})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"T\u1ed5ng ti\u1ec1n h\xe0ng"}),Object(p.jsx)("div",{children:Object(D.X)(e.total,"VND")})]}),!!e.payment_point&&Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Xu s\u1eed d\u1ee5ng"}),Object(p.jsxs)("div",{children:["-",Object(D.X)(e.payment_point,"VND")]})]}),!!e.discount&&Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Gi\u1ea3m gi\xe1"}),Object(p.jsxs)("div",{children:["-",Object(D.X)(e.discount,"VND")]})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Ph\xed v\u1eadn chuy\u1ec3n"}),Object(p.jsx)("div",{children:Object(D.X)(e.shipping_fee,"VND")})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsxs)("div",{children:["pending"==Object.keys(t)[0]?"T\u1ea1m t\xednh":"T\u1ed5ng c\u1ed9ng",":"]}),Object(p.jsx)("div",{style:{fontWeight:500},children:Object(D.X)(e.total_after_discount,"VND")})]}),Object(p.jsx)("div",{className:"levera-divider"}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Ng\u01b0\u1eddi nh\u1eadn"}),Object(p.jsx)("div",{children:e.shipping_address.full_name})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(p.jsx)("div",{children:e.shipping_address.phone_number})]}),Object(p.jsxs)("div",{className:"levera-item",style:{alignItems:"flex-start"},children:[Object(p.jsx)("div",{style:{flex:1},children:"\u0110\u1ecba ch\u1ec9"}),Object(p.jsx)("div",{style:{flex:1,textAlign:"right"},children:e.shipping_address.full_address})]})]})}):null})),Object(M.a)(Object(R.a)(s),"renderLeveraOrder",(function(e){var t=s.props,a=t.t,n=t.shopId,i=Object(D.Mb)(!0).replace("/api",""),r="".concat(i,"/shop/").concat(n,"/order?order_id=").concat(e.order.id);return e?Object(p.jsx)("div",{className:"levera-attachment",children:Object(p.jsxs)("div",{className:"levera-attachment-item",children:[Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)(mt.a,{placement:"topLeft",title:a("conversation.recentOrder.viewOrderDetail"),children:Object(p.jsx)("div",{className:"levera-label limit-text",children:"\u0110\u01a1n h\xe0ng m\u1edbi"})}),Object(p.jsxs)(k.a,{style:{marginRight:0},color:"volcano",children:[e.order.items.length," s\u1ea3n ph\u1ea9m"]})]}),Object(p.jsx)("div",{className:"levera-divider header-divider"}),e.order.items.slice(0,2).map((function(e){return Object(p.jsx)("div",{style:{marginBottom:"8px"},className:"levera-item",children:s.renderProductAttachment(Ot(Ot({},e.variation_info),{},{variations:[{detail:e.variation_info.detail,price:e.variation_info.retail_price,quantity:e.quantity}],link:r}))})})),e.order.items.length>3&&Object(p.jsxs)("div",{className:"levera-item see-more-item-info",onClick:function(){return window.open(r)},children:["Xem th\xeam ",e.order.items.length-2," s\u1ea3n ph\u1ea9m kh\xe1c",Object(p.jsx)(N.a,{type:"right"})]}),Object(p.jsx)("div",{className:"levera-divider"}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"T\u1ed5ng ti\u1ec1n h\xe0ng"}),Object(p.jsx)("div",{children:Object(D.X)(e.order.items.reduce((function(e,t){return e+t.variation_info.retail_price*t.quantity}),0),"VND")})]}),!!e.order.payment_point&&Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Xu s\u1eed d\u1ee5ng"}),Object(p.jsxs)("div",{children:["-",Object(D.X)(e.order.payment_point,"VND")]})]}),!!e.order.discount&&Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Gi\u1ea3m gi\xe1"}),Object(p.jsxs)("div",{children:["-",Object(D.X)(e.order.discount,"VND")]})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"Ph\xed v\u1eadn chuy\u1ec3n"}),Object(p.jsx)("div",{children:Object(D.X)(e.order.shipping_fee,"VND")})]}),Object(p.jsx)("div",{className:"levera-divider"}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"T\u1ea1m t\xednh"}),Object(p.jsx)("div",{style:{fontWeight:500},children:Object(D.X)(e.order.items.reduce((function(e,t){return e+t.variation_info.retail_price*t.quantity}),0)-e.order.discount-e.order.payment_point+e.order.shipping_fee,"VND")})]})]})}):null})),Object(M.a)(Object(R.a)(s),"renderLeveraAddress",(function(e){var t;return e?(t="office"==e.type?{color:"green",borderColor:"#52c41a",content:"V\u0103n ph\xf2ng"}:{color:"blue",borderColor:"#1890ff",content:"Nh\xe0 ri\xeang"},Object(p.jsx)("div",{className:"levera-attachment",children:Object(p.jsxs)("div",{className:"levera-attachment-item",children:[Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{className:"levera-label limit-text",children:"Th\xf4ng tin giao h\xe0ng"}),Object(p.jsx)(k.a,{style:{marginRight:0,borderColor:t.borderColor},color:t.color,children:t.content})]}),Object(p.jsx)("div",{className:"levera-divider header-divider"}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"T\xean ng\u01b0\u1eddi nh\u1eadn"}),Object(p.jsx)("div",{children:e.full_name})]}),Object(p.jsxs)("div",{className:"levera-item",children:[Object(p.jsx)("div",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "}),Object(p.jsxs)("div",{children:[" ",e.phone_number," "]})]}),Object(p.jsxs)("div",{className:"levera-item",style:{alignItems:"flex-start"},children:[Object(p.jsx)("div",{style:{flex:1},children:"\u0110\u1ecba ch\u1ec9"}),Object(p.jsx)("div",{style:{flex:2,textAlign:"right"},children:e.full_address})]})]})})):null})),Object(M.a)(Object(R.a)(s),"renderWhatsappBusinessTemplate",(function(e){var t,a=e.components,n=a.find((function(e){return"HEADER"==e.type})),i=a.find((function(e){return"BODY"==e.type})),r=a.find((function(e){return"BUTTONS"==e.type})),c=a.find((function(e){return"FOOTER"==e.type}));return Object(p.jsxs)("div",{className:"whatsapp-business-template",style:{lineHeight:"1.5",padding:"10px",backgroundColor:"white",borderRadius:"8px"},children:[(null===n||void 0===n?void 0:n.text)&&Object(p.jsx)("div",{children:n.text}),"VIDEO"==(null===n||void 0===n?void 0:n.format)&&n.url&&Object(p.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(f.createElement)(Re.a,Ot(Ot({},s.props),{},{key:s.props.id,attachment:{type:"video",id:s.props.id,video_data:{url:n.url,width:200,height:300,length:0}},messageId:s.props.id}))}),"DOCUMENT"==(null===n||void 0===n?void 0:n.format)&&n.url&&Object(p.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:s.parseAttachments([{type:"document",id:s.props.id,url:n.url,name:n.filename,mime_type:""}])}),"IMAGE"==(null===n||void 0===n?void 0:n.format)&&n.url&&Object(p.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:s.parseAttachments([{type:"photo",url:n.url}])}),(null===i||void 0===i?void 0:i.text)&&Object(p.jsx)("div",{children:i.text}),(null===c||void 0===c?void 0:c.text)&&Object(p.jsx)("div",{style:{color:"#9c9fa3"},children:c.text}),(null===r||void 0===r||null===(t=r.buttons)||void 0===t?void 0:t.length)&&Object(p.jsx)("div",{children:r.buttons.map((function(e,t){return Object(p.jsx)("div",{className:"button-attachments",style:{marginTop:2,marginBottom:3},children:Object(p.jsx)(x.a,{className:"btn-template-messenger",style:{borderRadius:"4px"},disabled:!0,children:e.text})},t)}))})]})})),Object(M.a)(Object(R.a)(s),"renderSendError",(function(e){if(e){s.props.t;return Object(p.jsx)(mt.a,{title:e.reason,children:Object(p.jsx)("div",{style:{color:"red",lineHeight:"1.5",transform:"translateY(-50%)",position:"absolute",top:"50%",right:"-16px",cursor:"pointer"},children:Object(p.jsx)(N.a,{type:"info-circle"})})})}})),Object(M.a)(Object(R.a)(s),"reloadMessageAttachments",(function(e,t){var a=s.props,n=a.id,i=a.conversationId,r=a.pageId,c=a.accessToken,o=a.dispatch,l=a.loadedAttachments,d=(a.t,l.find((function(t){return t.id===e})));d?window.open(d.url,"_blank","noopener,noreferrer"):o(Object(Ke.r)(r,i,n,e,!1,c)).then((function(a){try{var s=a.find((function(t){return t.id===e}));window.open(s.file_url,"_blank","noopener,noreferrer")}catch(n){window.open(t,"_blank","noopener,noreferrer")}}))})),Object(M.a)(Object(R.a)(s),"toggleEditMode",(function(e){var t=s.props,a=t.toggleEditMode,n=t.isEditing,i=t.id;s.setState({currentPhoto:e}),a(i,n,e)})),Object(M.a)(Object(R.a)(s),"handleSaveMessage",(function(e){var t=s.refs.newMessageContent;if(t){var a=s.props;(0,a.editComment)(a.id,t.value,e)}})),Object(M.a)(Object(R.a)(s),"handleDeleteImageComment",(function(){var e=s.props,t=e.editComment,a=e.id,n=e.isEditing,i=s.refs.newMessageContent;i&&t(a,i.value,[],n)})),Object(M.a)(Object(R.a)(s),"handleSelectedPhotosChange",(function(e){var t=s.props,a=t.editComment,n=t.id,i=t.isEditing;s.setState({selectedPhotos:e});var r=e.map((function(e){return{image_data:e.image_data,type:"photo",url:e.url}})),c=s.refs.newMessageContent;c&&a(n,c.value,r,i)})),Object(M.a)(Object(R.a)(s),"showCustomerSeenMessage",(function(){var e=s.props,t=(e.from,e.id,e.pageId),a=e.auth,n=e.currentPlatform,i=e.readWatermarks,r=e.statusMessage;if(!i)return"";if(!r&&0==i.length)return"";var c=null;if(i.length>0)c=i.map((function(e,s){var i=Object(D.nd)(e,t,n,a.accessToken);return Object(p.jsx)(mt.a,{id:"customers_seen_avt_tooltip",placement:"top",title:"Seen at ".concat(Object(D.Pc)(1e3*e.watermark,a.locale)),children:Object(p.jsx)(O.a,{size:"small",src:i})},s)}));else{switch(r.status){case"sent":c=Object(p.jsx)("svg",{fill:"none",width:"12",height:"11",viewBox:"0 0 12 11",class:"",children:Object(p.jsx)("path",{d:"M11.155.653A.457.457 0 0 0 10.85.55a.493.493 0 0 0-.38.178L4.28 8.365 1.875 6.093a.463.463 0 0 0-.336-.146.47.47 0 0 0-.344.146l-.31.31a.445.445 0 0 0-.14.337c0 .136.046.25.14.343l2.995 2.996a.724.724 0 0 0 .502.203.697.697 0 0 0 .546-.266l6.646-8.417a.497.497 0 0 0 .108-.299.441.441 0 0 0-.19-.374l-.337-.273Z",fill:"currentcolor"})});break;default:c=Object(p.jsx)("svg",{fill:"rgba(255, 255, 255, 0.5)",width:"16",height:"11",viewBox:"0 0 16 11",class:"",children:Object(p.jsx)("path",{d:"M11.071.653a.457.457 0 0 0-.304-.102.493.493 0 0 0-.381.178l-6.19 7.636-2.405-2.272a.463.463 0 0 0-.336-.146.47.47 0 0 0-.343.146l-.311.31a.445.445 0 0 0-.14.337c0 .136.047.25.14.343l2.996 2.996a.724.724 0 0 0 .501.203.697.697 0 0 0 .546-.266l6.646-8.417a.497.497 0 0 0 .108-.299.441.441 0 0 0-.19-.374L11.07.653Zm-2.45 7.674a15.31 15.31 0 0 1-.546-.355.43.43 0 0 0-.317-.12.46.46 0 0 0-.362.158l-.292.33a.482.482 0 0 0 .013.666l1.079 1.073c.135.135.3.203.495.203a.699.699 0 0 0 .552-.267l6.62-8.391a.446.446 0 0 0 .109-.298.487.487 0 0 0-.178-.375l-.355-.273a.487.487 0 0 0-.673.076L8.62 8.327Z",fill:"currentColor"})})}c=Object(p.jsx)("i",{style:{color:"rgba(0, 0, 0, 0.4)",marginRight:"3px"},children:c})}return Object(p.jsx)("div",{className:"customers_seen_avt",children:c})})),Object(M.a)(Object(R.a)(s),"onClickRepliedMessage",(function(e){return document.getElementById("message_".concat(e))?Object(D.td)(e):s.props.scrollToRepliedMessage({page_id:s.props.pageId,message_id:e,conversation_id:s.props.conversationId})})),Object(M.a)(Object(R.a)(s),"renderRepliedMessage",(function(e){var t=s.props,a=t.from,n=t.id,i=t.t,r=t.currentPlatform,c=t.pages,o=Object(D.Ec)(r);if(e)switch(e.type){case"instagram_story_reply":var l=e.story_link;return Object(p.jsxs)("div",{className:"from-replied-to instagram-story-reply",children:[Object(p.jsx)(Se.a,{style:{fontSize:11}})," ",Object(p.jsxs)("span",{children:[i("instagram.storyReply",{username:e.from.name}),"\xa0",Object(p.jsx)("i",{onClick:function(){return window.open(null===l||void 0===l?void 0:l.url)},children:Object(p.jsx)(tt.a,{})})]}),Object(p.jsx)("br",{}),l&&Object(p.jsx)(at.a,{pages:c,messageId:e.id,mediaType:l.media_type||"image",mediaUrl:l.url})]});default:var d=e&&e.attachments&&e.attachments.filter((function(e){return e&&"replied_message"!==e.type}))||[],m=Boolean((null===d||void 0===d?void 0:d.length)>0&&d.find((function(e){return"wa_contacts"==e.type})));return"whatsapp"==o?Object(p.jsxs)("div",{className:"replied-message-wa ".concat(m?"media-message-from-page media-message-whatsapp wa-contact wa-replied-message":""),children:[Object(p.jsxs)("div",{className:"text-message",children:[a&&e.from&&Object(p.jsxs)("div",{className:"from-replied-to",onClick:function(){return s.onClickRepliedMessage(e.id)},children:[Object(p.jsx)(Se.a,{style:{fontSize:11}}),Object(p.jsxs)("span",{style:{color:Object(D.gb)(a.id)},children:[a.name," "]})," replied to "," ",Object(p.jsx)("span",{style:{color:Object(D.gb)(e.from.id)},children:e.from.name})]}),Object(p.jsxs)("div",{className:"content-replied-message",onClick:function(){return s.onClickRepliedMessage(e.id)},children:[e.image&&Object(p.jsx)(Ae.a,{style:{marginRight:5}}),Object(p.jsx)("span",{dangerouslySetInnerHTML:{__html:e.image&&!e.message?"\u1ea2nh":(e.message_tags||[]).reduce((function(e,t){return"wa_mention"==t.type?e.replace(new RegExp(t.id,"gi"),'<span class="message-tag">'.concat("@"+t.name,"</span>")):e}),e.message)}}),d.length>0&&Object(p.jsx)("div",{className:"media-body-attachment",children:s.parseAttachments(d)})]})]}),e.image&&Object(p.jsx)("img",{src:e.image.url,style:{width:60,height:60,objectFit:"cover"}})]},n):Object(p.jsxs)("span",{children:[a&&e.from&&Object(p.jsxs)("div",{className:"from-replied-to",onClick:function(){return s.onClickRepliedMessage(e.id)},children:[Object(p.jsx)(Se.a,{style:{fontSize:11}})," ","".concat(a.name," replied to ").concat(e.from.name)]}),Object(p.jsxs)("div",{className:"content-replied-message ".concat(m?"media-message-whatsapp wa-contact media-message-from-page":""),children:[e.message&&Object(p.jsx)("span",{children:e.message}),d.length>0&&Object(p.jsx)("div",{className:"media-body-attachment",children:s.parseAttachments(d)})]})]})}})),Object(M.a)(Object(R.a)(s),"renderMessageReaction",(function(e){var t=s.props,a=t.currentPlatform,n=t.id,i=t.likeToggle,r=t.reactMessage,c=t.pageId,o=t.from;switch(a){case"facebook":if(0==e.length)return;var l=e[0];return Object(p.jsxs)("div",{className:"content-reaction-message",children:[Object(p.jsx)("span",{style:{marginRight:8},children:l.emoji}),Object(p.jsx)("span",{children:"1"})]});case"whatsapp":case"zalo":var d=s.hasReactions(e),m=c==o.id?{}:{float:"left",left:0},j=Object(p.jsxs)("div",{children:[vt.map((function(e){return Object(p.jsx)("span",{className:"all-emoji",onClick:function(){return r(n,e)},children:e.emoji})})),d&&Object(p.jsx)(Fe.a,{className:"close-emoji",onClick:function(){return r(n,"remove")}})]}),h=e;switch(a){case"zalo":h=z()(e,"reaction")}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b.a,{overlayClassName:"emoji-popover",content:j,mouseEnterDelay:"0.3",children:Object(p.jsx)("div",{id:"zalo",style:m,className:"content-reaction-message zalo ".concat(d?"has-reaction":""),children:d?Object(p.jsx)("div",{style:{display:"flex"},onClick:function(){return s.setState({showZaloReaction:!0})},children:h.map((function(e){return Object(p.jsx)("span",{className:"user-emoji",children:e.emoji})}))}):Object(p.jsx)(N.a,{type:"like",onClick:function(){return r(n,vt[0])}})})}),"zalo"==a&&s.renderZaloReactionModal(e),"whatsapp"==a&&s.renderWhatsappReactionModal(e)]});case"instagram":case"instagram_official":var u=e.filter((function(e){return"love"===e.reaction})).length;return Object(p.jsx)("div",{className:"content-reaction-message instagram-official ".concat(u?"loved":""),children:Object(p.jsxs)("div",{onClick:function(){return i(n)},children:[u?Object(p.jsx)(ee.a,{}):Object(p.jsx)(ae.a,{}),Object(p.jsx)("span",{className:"heart-count",children:u})]})})}})),Object(M.a)(Object(R.a)(s),"renderWhatsappReactionModal",(function(e){var t=s.props,a=t.auth,n=t.pages,i=t.selectedCustomers,r=t.currentPlatform,c=n.activated.find((function(e){return e.id==n.currentPageId}));return Object(p.jsx)(h.a,{wrapClassName:"zalo-reaction-modal",title:"Reaction",footer:null,visible:s.state.showZaloReaction,onCancel:function(){return s.setState({showZaloReaction:!1})},children:e.map((function(e){var t,s;if(e.fb_id!=c.id){var o=i.find((function(t){return t.fb_id==e.fb_id}));o?(t=Object(D.nd)(o,n.currentPageId,r,a.accessToken),s=o.name):s=e.from_name}else t=Object(D.id)(c,a),s=c.name;return Object(p.jsxs)("p",{className:"user-reaction-modal",children:[Object(p.jsxs)("div",{className:"user-data-modal",children:[Object(p.jsx)(Me.a,{name:s,width:42,height:42,style:{verticalAlign:"top",border:"1px solid #fff",borderRadius:"50%",marginRight:"5px"},url:t}),s]}),Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"user-emoji-modal",children:e.emoji})})]})}))})})),Object(M.a)(Object(R.a)(s),"renderZaloReactionModal",(function(e){var t=s.props,a=t.auth,n=t.pages,i=t.conversationFrom,r=t.selectedCustomers,c=t.currentPlatform,o=n.activated.find((function(e){return e.id==n.currentPageId})),l=e.map((function(e){var t=e.user_id,a=t&&t.startsWith("zl_")?t:"zl_"+t;return Ot(Ot({},e),{},{user_id:a})})),d=z()(l,"user_id");return Object(p.jsx)(h.a,{wrapClassName:"zalo-reaction-modal",title:"Reaction",footer:null,visible:s.state.showZaloReaction,onCancel:function(){return s.setState({showZaloReaction:!1})},children:d.map((function(e){var t,s,d=e.user_id,m=l.filter((function(e){return e.user_id==d}));if(d==i.id){var j=r[0];t=Object(D.nd)(j,n.currentPageId,c,a.accessToken),s=i.name}else t=Object(D.id)(o,a),s=o.name;return Object(p.jsxs)("p",{className:"user-reaction-modal",children:[Object(p.jsxs)("div",{className:"user-data-modal",children:[Object(p.jsx)(Me.a,{width:42,height:42,style:{verticalAlign:"top",border:"1px solid #fff",borderRadius:"50%",marginRight:"5px"},url:t}),s]}),Object(p.jsx)("div",{children:z()(m,"reaction").map((function(e){return Object(p.jsx)("span",{className:"user-emoji-modal",children:e.emoji})}))})]})}))})})),Object(M.a)(Object(R.a)(s),"renderRichMessage",(function(){var e=s.props,t=e.id,a=e.richMessage,n=e.t,i=e.message,r=e.from,c=e.pageId,o=e.pages,l=e.auth,d=(l.accessToken,l.locale),m=l.country,j=e.conversationFrom,h=e.onReplyToSelected,u=e.isReplyTo,b=e.currentPlatform;if(a&&"{}"!=JSON.stringify(a)){var g=o.activated.find((function(e){return e.id==o.currentPageId})),O=xt.parseWithInstructions(i,yt,_t(r));if(s.isInstagramPlatform())switch(a.type){case"story_share":return Object(p.jsxs)("div",{className:"story_share_id_mess",children:[a.user&&a.user?Object(p.jsx)("div",{onClick:function(){return window.open("https://www.instagram.com/".concat(a.user.username,"/"),"_blank")},children:n("instagram.storyShare",{username:a.user.username})}):null,a&&a.message?Object(p.jsx)("div",{children:a.message}):null]});case"reel_share":switch(a.reel_share_type){case"reply":return Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{style:{color:"#AAAAAA",fontSize:10},children:n("instagram.reelShareReply")}),O]});case"reaction":return Object(p.jsx)("div",{children:O.props&&O.props.children?Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{style:{color:"#AAAAAA",fontSize:10,display:"inline-flex"},children:n("instagram.reelShareReaction",{reaction:O.props.children})}),Object(p.jsx)("div",{style:{position:"absolute",fontSize:60,zIndex:1e3},children:O.props.children})]}):null});case"mention":default:return null}case"media_share":return Object(p.jsx)("div",{className:"media_share_ig_mess",children:a.user&&a.user?Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"media_share_el",onClick:function(){return window.open("https://www.instagram.com/p/".concat(a.code,"/"),"_blank")},children:[n("instagram.mediaShare",{username:a.user.username}),Object(p.jsx)(N.a,{style:{marginLeft:5},type:"export"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{style:{fontWeight:"bold"},children:a.user.username})," ",a.caption||null]})]}):null});case"story_mention":return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"instagram-story-info",children:n("instagram.storyMention",{username:a.user.username})}),Object(p.jsx)(at.b,{pageId:c,messageId:a.message_id,fromPage:a.user.id===c})]});default:return null}if("lazada"==a.platform)return"order"==a.type?Object(p.jsx)(pt.a,{coppyId:s.props.id,totalPrice:a.total_price,orderSn:a.order_sn,createdAt:a.created_at,billFullName:a.shipping_address?a.shipping_address.full_name:null,billPhoneNumber:a.bill_phone_number,orderItems:a.order_items,fullAddress:a.shipping_address?a.shipping_address.full_address:null,partnerId:a.partner_id,images:a.images,shopeeOrderId:a.shopee_order_id,t:n,locale:d,country:m,url:a.url},s.props.id):"product"==a.type?Object(p.jsx)("div",{className:"product-container",children:s.renderProductAttachment(Ot(Ot({},a),{},{id:s.props.id,link:a.url,variations:[{oldPrice:a.old_price,price:a.price}]}))}):null;if("tiktok"==a.platform)switch(a.type){case"tiktok_product":case"tiktok_user_enter_from_product":var v=a.items||[{price:a.skuMaxPriceDesc}];return Object(p.jsx)("div",{className:"product-container",children:s.renderProductAttachment(Ot(Ot({},a),{},{variations:v,id:s.props.id,link:a.url}))});default:return null}if("shopee_product"==a.type&&a.items.length-1,"variations"==a.type){var x=a.shopee_product_id,f={},y=document.getElementsByClassName("message-list"),_=y&&y[0]&&y[0].clientWidth;return"<div></div>"!==i&&r.id!==c&&_&&(f={width:_-80}),Object(p.jsx)("div",{className:"product-container",style:f,children:a.variations.map((function(e){return s.renderProductAttachment({name:e.product.name,variations:[{price:e.retail_price}],images:e.images||[],stock:e.stock,link:"".concat(Object(D.Bd)(g.country),"/portal/product/").concat(x||e.shopee_product_id)})}))})}if("shopee_order"==a.type)return Object(p.jsx)(et.a,{coppyId:s.props.id,totalPrice:a.total_price,orderSn:a.order_sn,createdAt:a.created_at,billFullName:a.shipping_address?a.shipping_address.full_name:null,billPhoneNumber:a.bill_phone_number,orderItems:a.order_items,fullAddress:a.shipping_address?a.shipping_address.full_address:null,partnerId:a.partner_id,orderStatus:a.order_status,images:a.images,shopeeOrderId:a.shopee_order_id,t:n,locale:d,country:m,platform:b},s.props.id);if("shopee_product_offer"==a.type){var w=Ot({},a);return delete w.type,Object(p.jsx)(st.a,{t:n,offerStatus:a.offer_status,productName:a.product_name,productImages:a.image_url,productModel:a.model_name,createdAtOffer:a.inserted_at,orignalPrice:a.original_price,price:a.price,quantity:a.quantity,timezone:s.props.auth.timezone,accessToken:s.props.auth.accessToken,pageId:s.props.pageId,shopeeReplyOffer:Ke.C,dispatch:s.props.dispatch,offer:w,messageId:s.props.id,locale:d})}if("shopee_voucher"==a.type)return Object(p.jsx)(nt.a,{t:n,richMessage:a,accessToken:s.props.auth.accessToken,currentPageId:o.currentPageId,shopeeCustomerUsername:j&&j.username,updateShopeeVoucherStatus:Ke.O,dispatch:s.props.dispatch,country:g.country});if("shopee_rating"==a.type)return Object(p.jsx)(dt.a,{t:n,richMessage:a,accessToken:s.props.auth.accessToken,currentPageId:o.currentPageId,shopeeCustomerUsername:j&&j.username,dispatch:s.props.dispatch,children:Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",style:{marginTop:6},checked:u,onChange:function(){h&&h(t)}}),Object(p.jsx)("span",{style:{color:"crimson",paddingLeft:5},children:n("replyThisRating")})]})});if("tiktok_message_request"==a.type)return Object(p.jsx)("div",{className:"tiktok-mesesage-request-notice",children:n("tiktok.messageRequestNotice")});var k="";k="toko_product"==a.type?a.url:a.shopee_shop_id?"//shopee.".concat(Object(D.Ad)(m),"/product/").concat(a.shopee_shop_id,"/").concat(a.shopee_product_id,"/"):"".concat(Object(D.Bd)(g.country),"/portal/product/").concat(a.shopee_product_id);var C=a.images||a.image_urls||[],A=a&&a.items&&a.items.length>0?a.items:[{price:a.price}];return Object(p.jsx)("div",{className:"product-container",children:s.renderProductAttachment(Ot(Ot({},a),{},{variations:A,images:C.map((function(e){return"toko_product"==a.type?e:"https://cf.shopee.".concat(Object(D.Ad)(m),"/file/").concat(e)})),link:k}))})}})),Object(M.a)(Object(R.a)(s),"renderWAAction",(function(){var e=s.props,t=e.from,a=e.pageId,n=e.message,i=e.id,r=e.dispatch,c=e.currentPlatform,o=e.attachments,l=e.accessToken,d=e.conversationId,m=e.t,j=e.insertedAt;if("whatsapp"!=Object(D.Ec)(c))return null;var u=t.id==a&&Z()().diff(Z.a.utc(j),"seconds")<3600;return Object(p.jsxs)("div",{className:"wa-action",style:Object(M.a)({},t.id==a?"marginRight":"marginLeft",3),children:[Object(p.jsx)("div",{className:"action-btn",onClick:function(){return r(Object(Ke.N)({id:i,message:n,from:t,attachments:o}))},children:Object(p.jsx)(ze.a,{})}),"whatsapp"==c&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"action-btn",onClick:s.handleClickStartForwardMessageFollow.bind(Object(R.a)(s),i,!0),children:Object(p.jsx)(Ee.a,{})}),u&&Object(p.jsx)("div",{className:"action-btn",onClick:function(){return h.a.confirm({title:m("conversation.waRevoke"),onOk:function(){return r(Object(Ke.h)({conversation_id:d,id:i,page_id:a},l))}})},children:Object(p.jsx)(N.a,{type:"delete",theme:"filled"})})]})]})})),Object(M.a)(Object(R.a)(s),"renderZaloAction",(function(){var e=s.props,t=e.from,a=e.pageId,n=e.id,i=e.message,r=e.attachments,c=e.dispatch;return Object(p.jsx)("div",{className:"zalo-action",style:Object(M.a)({},t.id==a?"marginRight":"marginLeft",3),children:Object(p.jsx)("div",{className:"action-btn",onClick:function(){return c(Object(Ke.N)({id:n,message:i,from:t,attachments:r}))},children:Object(p.jsx)(ze.a,{})})})})),Object(M.a)(Object(R.a)(s),"renderSenderName",(function(e,t){return["shopee","instagram"].includes(e)?(null===t||void 0===t?void 0:t.username)||"":"personal_zalo"==e?(null===t||void 0===t?void 0:t.displayName)||(null===t||void 0===t?void 0:t.zaloName)||"":(null===t||void 0===t?void 0:t.name)||""})),Object(M.a)(Object(R.a)(s),"renderCommentMessage",(function(){var e=s.state.showingAdditionalInfo,t=s.props,a=(t.type,t.hasError),n=t.isCombined,i=t.parentId,r=t.attachments,c=t.isEditing,o=t.insertedAt,l=t.id,d=(t.richMessage,t.message),m=t.from,j=t.pageId,h=t.showInfo,u=t.conversationFrom,b=t.isReplyTo,g=t.isPreview,O=t.currentPlatform,v=t.onCustomerSelected,x=t.auth,f=t.onReplyToSelected,y=t.t,_=t.checkFromAround,w=t.isLivestreamOrder,k=xt.parseWithInstructions(d,yt,_t(m)),C=j==m.id,A=w?{border:"1px solid #".concat(n&&i?Object(D.Dd)(i):Object(D.Dd)(l))}:{},P=n&&i?{boxShadow:"none"}:{};(n&&i||w)&&(A=Ot(Ot({},A),{},{borderRadius:"12px"}),n&&i&&(A=Ot(Ot({},A),{},{borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px"})),P=Ot(Ot({},P),{},{borderRadius:"12px"}));var S=Object(p.jsxs)("div",{className:"media-body-text",style:Ot(Ot({},A),{},{borderBottom:n&&i?"6px solid #".concat(Object(D.Dd)(i)):w?"1px solid #".concat(Object(D.Dd)(i)):"none",marginLeft:!C&&(h?0:58)}),children:[w&&Object(p.jsxs)("span",{className:"badge-live-order",style:{color:"white"},children:[Object(p.jsx)("span",{children:Object(p.jsx)(N.a,{style:{fontSize:12,color:"white",marginRight:5},type:"shopping-cart"})}),"LIVE"]}),Object(p.jsxs)("div",{className:"message-text-ele comment-text-ele ".concat(a?"has-error":""),style:Ot({backgroundColor:C?"#dcf8c6":"none"},P),children:[c?Object(p.jsx)("textarea",{ref:"newMessageContent",rows:3,className:"editable-message",defaultValue:d.replace(/<br[\s\w=']*\/?>/gi,"\n").replace(/<\/?div>/gi,"")}):k,r.length>0&&(c?Object(p.jsxs)("div",{children:[Object(p.jsx)(mt.a,{title:y("deleteImage"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(Ne.a,{className:"delete-image-action",onClick:s.handleDeleteImageComment})}),Object(p.jsx)("div",{className:"media-body-attachment ".concat(r.length>0?"has-attachment":""),children:s.parseAttachments(r)})]}):Object(p.jsx)("div",{className:"media-body-attachment",children:s.parseAttachments(r)},"".concat(o,"_").concat(l,"_"))),Object(p.jsx)("div",{className:"clearfix"}),s.renderActions()]})]}),I=Object(p.jsx)("div",{className:"additional-info",style:{margin:"0px 8px",opacity:b?1:""},children:Object(p.jsx)("div",{style:{display:"flex"},children:Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:g||C?Object(p.jsx)("span",{style:{fontWeight:500},children:m.admin_name}):Object(p.jsx)(U.a,{id:"".concat(l,"_name_1"),text:s.renderSenderName(O,m),children:Object(p.jsx)("span",{className:"copyable-text sender-name",style:{fontWeight:500,color:"#888"},onClick:v&&v.bind(Object(R.a)(s),m.id),children:s.renderSenderName(O,m)})})}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[C&&"mobile"==m.platform&&Object(p.jsx)(ke.a,{style:{marginTop:"-1.5px"}}),Object(D.Pc)(Object(D.zd)(o,x.timezone),x.locale),!C&&n&&Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",checked:b,style:{marginTop:6},onChange:f&&f.bind(Object(R.a)(s),l)}),Object(p.jsx)("span",{style:{color:"crimson",paddingLeft:5},children:y("replyThisComment")})]})]})]})})}),M=_.isLastMess?{paddingBottom:3}:{};return(n&&i||w)&&(M=Ot(Ot({},M),{},{marginTop:"10px"})),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{id:"message_".concat(l),className:"media m-b-md comment-message-ele ".concat(C?"media-current-user":""),style:M,children:[!C&&u&&s.showSenderAvatar(h,j,m,u.id!=m.id),Object(p.jsx)("div",{className:"media-body",onMouseEnter:function(){return s.setState({showingAdditionalInfo:!0})},onMouseLeave:function(){return s.setState({showingAdditionalInfo:!1})},children:C?Object(p.jsxs)(p.Fragment,{children:[e&&I,S]}):Object(p.jsxs)(p.Fragment,{children:[S,e&&I]})})]})})})),Object(M.a)(Object(R.a)(s),"renderActionViewRevokedMessage",(function(){var e=s.state.isShowRevokedMessage,t=s.props.t;return Object(p.jsxs)("div",{className:"whatsapp-revoked-header",children:[Object(p.jsx)("span",{className:"revoked-text",children:t("conversation.waRevokedMessage")}),Object(p.jsx)("span",{className:"revoked-text-action",children:Object(p.jsx)(N.a,{onClick:function(){s.setState({isShowRevokedMessage:!e})},type:"".concat(e?"eye":"eye-invisible")})})]})})),Object(M.a)(Object(R.a)(s),"renderOtherActionByPlatform",(function(){var e=s.props,t=e.currentPlatform,a=e.pageId,n=e.from,i=e.attachments;switch(t){case"facebook":case"":case null:return a!=n.id&&s.renderFacebookAction();case"whatsapp_official":case"whatsapp":return!!!i.find((function(e){return e&&"wa_system"==e.type}))&&s.renderWAAction();case"zalo":return s.renderZaloAction()}})),Object(M.a)(Object(R.a)(s),"renderInboxMessage",(function(){var e=s.props,t=e.id,a=e.pageId,n=e.from,i=e.message,r=e.showInfo,c=e.insertedAt,o=(e.messageTags,e.phoneInfo,e.attachments),l=(e.isCombined,e.parentId,e.hasError),d=e.conversationFrom,m=e.onCustomerSelected,j=(e.isEditing,e.isPreview),h=e.isReplyTo,u=(e.t,e.auth),b=(e.onReplyToSelected,e.type,e.currentPlatform),g=e.richMessage,O=e.checkFromAround,v=e.isRemoved,x=e.userLikes,f=(e.isForwardingMessage,e.selectedMessageIds,s.state),_=f.mediaListConversationWidth,w=f.showingAdditionalInfo,k=f.isShowRevokedMessage,C=!O.sameFromBottom&&r,A=xt.parseWithInstructions(i,yt,_t(n)),P=(o.find((function(e){return e&&"reaction"==e.type})),!!o.find((function(e){return e&&"wa_system"==e.type}))),S=a==n.id||P,I=o&&o[0]&&o[0].payload&&o[0].payload.buttons&&o[0].payload.buttons.length>0,M=("whatsapp"==b&&o&&o[0]&&"wa_system"==o[0].type&&o[0].message_type,Object(D.Ec)(b)),T=o.find((function(e){return e&&"send_error"==e.type})),z=l||T,B=o.reduce((function(e,t){if(t)switch(t.type){case"instagram_story_reply":case"replied_message":case"message":e.replyAttachments&&e.replyAttachments.push(t);break;case"reaction":e.reactionAttachments&&e.reactionAttachments.push(t);break;case"address":case"send_error":break;default:e.mediaAttachments&&e.mediaAttachments.push(t)}return e}),{replyAttachments:[],mediaAttachments:[],reactionAttachments:[]}),E=B.replyAttachments,L=B.mediaAttachments,F=B.reactionAttachments;s.isInstagramPlatform()&&F.push({reaction:x?"heartFull":"heartEmpty",type:"reaction"});var W=L.filter((function(e){return e&&["photo","retail_promotion","link","template"].includes(e.type)})).length,H="";W>4||3==W?H=_&&_<615?"has-4-attachments":"has-more-than-4-attachments":4==W&&(H="has-4-attachments");var X={};a==n.id?(O.sameFromTop&&(X={borderTopRightRadius:4}),(O.sameFromBottom||L&&L.length>0)&&(X=Object.assign(X,{borderBottomRightRadius:4}))):(O.sameFromTop&&(X={borderTopLeftRadius:4}),(O.sameFromBottom||L&&L.length>0)&&(X=Object.assign(X,{borderBottomLeftRadius:4})));var V=Object(p.jsxs)("span",{children:[S||j?Object(p.jsxs)("span",{style:{fontWeight:500},children:[n.admin_name," ",n.flow_id?Object(p.jsx)("a",{target:"_blank",href:"".concat(Object(D.pb)(),"/").concat(a,"/flows/").concat(n.flow_id,"/content"),children:Object(p.jsx)(N.a,{type:"link"})}):null]}):Object(p.jsx)(U.a,{id:"".concat(t,"_name"),text:s.renderSenderName(M,n),children:Object(p.jsx)("span",{className:"copyable-text sender-name",style:{fontWeight:500,color:"#888"},onClick:m&&m.bind(Object(R.a)(s),n.id),children:s.renderSenderName(M,n)})}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:["mobile"==n.platform&&Object(p.jsx)(ke.a,{style:{marginTop:"-1.5px"}}),Object(D.Pc)(Object(D.zd)(c,u.timezone),u.locale)]})]}),q=Object(p.jsx)("div",{className:"additional-info",style:{margin:"0px 8px",opacity:h?1:""},children:S?Object(p.jsxs)("div",{style:{display:"flex"},children:[V,s.renderOtherActionByPlatform()]}):Object(p.jsxs)("div",{style:{display:"flex"},children:[s.renderOtherActionByPlatform(),V]})}),G="whatsapp"==M&&v,Z=A&&A.props&&A.props.children&&L[0]&&"link"==L[0].type;Z&&(X=Object.assign(X,{borderBottomRightRadius:0,borderBottomLeftRadius:2}));var J=L&&L.length>0,Y="whatsapp"==M&&J&&["photo","video","wa_contacts","wa_order","wa_product"].includes(L[0].type)||"zalo"==M&&J&&"zalo_business_card"==L[0].type,K=(E&&E.length>0||A&&A.props&&A.props.children)&&!Y&&Object(p.jsxs)("div",{className:"message-text-field",children:[Object(p.jsx)("div",{className:"message-text-ele ".concat(z?"has-error":""),style:Ot({backgroundColor:S?"#dcf8c6":"none"},X),children:Object(p.jsxs)(y.a.Fragment,{children:["whatsapp"==M&&d&&d.is_group&&!S&&!O.sameFromTop&&Object(p.jsx)("div",{style:{color:Object(D.gb)(n.id),fontWeight:500,fontSize:12},children:n.name}),E&&E.map((function(e){return s.renderRepliedMessage(e)})),A]})}),!W&&!P&&w&&q]}),Q={marginLeft:!S&&(C?0:58)};"whatsapp"!=M||O.sameFromBottom||S||(Q=Ot(Ot({},Q),{},{marginBottom:8}));var $=Boolean(L.length>0&&!(L[0]&&"attachment"==L[0].type&&!L[0].name)&&L.find((function(e){return"wa_contacts"==e.type}))),ee=Object(p.jsxs)("div",{className:"media-body-text ".concat(G?"whatsapp-revoked ".concat(k?"whatsapp-revoked-show":"whatsapp-revoked-hide"):"","  ").concat(Y?"media-message-".concat(M):""," media-message-").concat(S?"from-page":"from-customer"," ").concat($?"wa-contact":""),style:Q,children:[G&&s.renderActionViewRevokedMessage(),g&&Object(p.jsxs)("div",{children:[s.renderRichMessage(),w&&q]}),K,L.length>0&&!(L[0]&&"attachment"==L[0].type&&!L[0].name)&&Object(p.jsxs)("div",{className:"media-body-attachment attachment-inbox ".concat(H," ").concat(z?"has-error-send":""),style:{marginTop:W&&L[0]&&"link"!=L[0].type?3:0},children:[s.parseAttachments(L,A),!P&&w&&q]},"".concat(c,"_").concat(t,"_")),s.renderMessageReaction(F),Object(p.jsx)("div",{className:"clearfix"})]}),te=Object.assign(S?{marginRight:P?50:20,textAlign:P?"center":"right"}:{marginBottom:8},{marginBottom:O.sameFromBottom&&W?S?4:2:"",lineHeight:A.props&&!A.props.children&&0});return Object(p.jsxs)("div",{id:"message_".concat(t),className:"media m-b-md inbox-message-ele\n          ".concat(S?"media-current-user ".concat(O.sameFromBottom?"":"not-same-from-bottom-mes","\n          ").concat(O.sameFromTop?"":"not-same-from-top-mes"):"media-current-customer","\n          ").concat(s.hasReactions(F)?"has-reaction":"","\n          ").concat(Z?"message-has-link":"","\n          ").concat(I?"message-has-attachments":"","\n        "),style:te,children:[!S&&d&&s.showSenderAvatar(C,a,n,d.id!=n.id),Object(p.jsxs)("div",{className:"media-body",onMouseEnter:function(){return s.setState({showingAdditionalInfo:!0})},onMouseLeave:function(){return s.setState({showingAdditionalInfo:!1})},style:{position:"relative"},children:[ee,s.showCustomerSeenMessage(),s.renderSendError(T)]})]})})),s.state={selectedPhotos:[],currentPhoto:[],show:!1,loadingProfile:!1,indexGeneric:0,downloading:!1,showingAdditionalInfo:!1,isShowRevokedMessage:!1,showZaloReaction:!1},s}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.indexMessage,a=e.onReplyToSelected,s=e.currentPlatform,n=e.id,i=document.getElementsByClassName("media-list-conversation"),r=i&&i[0]&&i[0].clientWidth;0==t&&"shopee"==s&&a&&a(n),this.setState({mediaListConversationWidth:r})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.loadingAvatar||this.setState({loadingProfile:!1}),(!this.props.loadingAvatar&&e.loadingAvatar||this.props.loadingAvatar!=e.loadingAvatar)&&this.setState({loadingProfile:!1})}},{key:"clickAvatar",value:function(e){var t=this,a=this.props.onAvatarClick;this.setState({loadingProfile:!0}),a(e).finally((function(){return t.setState({loadingProfile:!1})}))}},{key:"showSenderAvatar",value:function(e,t,a,s){var n,i,r,c,o,l=this,d=this.props,m=(d.pages,d.auth),j=d.currentPlatform,h=d.conversationFrom,u=d.checkFromAround,b=Object(D.Ec)(j),g=a.id;return r={boxShadow:"0 1px 2px rgba(0,0,0,0.38)",backgroundColor:"#eee",width:"42px"},i="media-object",c={height:n=42,width:50},s&&"whatsapp"!=b&&(n=34,i="media-object-children",r=Ot(Ot({},r),{},{width:"34px"})),"whatsapp"==b&&h&&h.is_group&&u.sameFromTop&&(c=Ot(Ot({},c),{},{position:"relative"}),o={position:"absolute",bottom:11}),e&&Object(p.jsx)("span",{className:"media-right",children:Object(p.jsx)("div",{style:c,children:Object(p.jsx)("div",{onClick:function(){return l.clickAvatar(g)},style:o,className:i,children:Object(p.jsx)(Me.a,{height:n,width:50,style:r,className:"img-circle",name:a&&a.name,id:g,url:Object(D.nd)(a,t,b,m.accessToken),hasLoadingAnimation:!0,loading:this.state.loadingProfile&&m.extension&&g!=t,customerSource:this.getCustomerSource()})})})})}},{key:"getCustomerSource",value:function(){var e=this.props.selectedCustomers;if(e){var t=e.find((function(e){return!!e.source}));return t&&t.source}}},{key:"parseAttachments",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.props,n=(s.type,s.isHidden,s.isParentHidden,s.isPreview),r=s.t,o=s.from,d=s.dispatch,j=s.conversationFrom,h=s.auth,u=s.pages,b=s.selectedCustomers,g=s.pageId,O=s.currentPlatform,v=s.checkFromAround,y=s.isClientBuild,_=s.id,w=s.postType,k=h.accessToken,C=e&&e.length||3,A=this.getMediaBodyTextWidth();return e.map((function(e,s){var R,P,S;if(e)switch(e.type){case"system_message":return Object(p.jsx)("div",{className:"wa_system_message",children:e.message});case"product":return Object(p.jsx)("div",{className:"product-container",children:e.variations.map((function(e){return t.renderProductAttachment(Ot(Ot({},e),{},{variations:[{detail:e.fields&&e.fields.map((function(e){return"".concat(e.name,": ").concat(e.value)})).join("; "),price:e.retail_price}]}))}))});case"levera_ticket":return t.renderLeveraTicket(e.order,e.ticket);case"levera_order":return t.renderLeveraOrder(e);case"levera_address":return t.renderLeveraAddress(e.receiver_info);case"wa_contacts":return Object(p.jsx)(ot.a,{t:r,contacts:e.contacts,dispatch:d});case"zalo_business_card":return Object(p.jsx)(ot.a,{t:r,contacts:[{display_name:e.name,phone_number:e.phone,avatar:e.avatar,qrCodeUrl:e.qrCodeUrl}],dispatch:d});case"wa_location":case"ln_location":return Object(p.jsx)("div",{className:"message-location",id:"google-map-".concat(_),style:{borderRadius:"20px"},children:Object(p.jsx)(ct.a,{lat:e.lat,lng:e.lng,locale:h.locale,name:e.name})});case"wa_product":return Object(p.jsx)("div",{style:{padding:"3px 7px"},children:t.renderProductAttachment({id:e.product_id,images:[e.image],name:e.title,currency:e.currency,variations:[{detail:e.description,price:e.price_amount}]})});case"wa_order":return Object(p.jsx)(lt.a,{itemCount:e.item_count,message:e.message,image:e.image,totalAmount:e.total_amount,currency:e.currency,t:r});case"wa_system":if(y)return Object(p.jsx)("div",{className:"wa_system_message",children:e.stub_params.subject});var I=e.stub_params&&e.stub_params.wid&&b.find((function(t){return t.fb_id==Object(D.Pd)(e.stub_params.wid)}));I&&(e.stub_params.participant=I.name);var M={};switch(e.message_type){case"GROUP_PARTICIPANT_LEAVE":M=Ot({name:I&&I.name||o.name},e.stub_params);break;default:M=Ot({name:o.name},e.stub_params)}return Object(p.jsx)("div",{className:"wa_system_message",children:r("whatsapp.".concat(e.message_type),M)});case"sticker":return Object(p.jsx)("div",{style:{display:"grid"},children:Object(p.jsx)(F.a,{height:128,width:128,className:"message-attachment-item sticker-element",children:Object(p.jsx)("img",{src:e.url})},s)},"".concat(s,"_").concat(e.id));case"photo":return Object(p.jsx)(H.a,{description:a,pages:u,index:s,isPreview:n,attachment:e,accessToken:k,classNames:"message-attachment-item ".concat(o.id==g?"multi-attachments":"multi-attachments-right"),attachmentsCount:C,fromPage:o.id==g,postType:w,messageId:_},"".concat(s,"_").concat(e.id));case"ad_click":case"link":if(["pke_chat_plugin","whatsapp","whatsapp_official"].includes(O)){var T=e.image&&e.image.image_data&&{width:e.image.image_data.width||140,height:e.image.image_data.height||140}||{width:140,height:140};return Object(p.jsxs)("div",{onClick:function(){return window.open(e.link.match(/^https?:/)?e.link:"//"+e.link)},className:"render-attachment-link",style:{backgroundColor:"#f0f0f0",cursor:"pointer"},children:[e.image&&Object(p.jsx)("img",{src:e.image.url,style:Ot(Ot({},T),{},{marginLeft:"auto",marginRight:"auto",display:"block",maxHeight:280,borderRadius:"8px 8px 0 0",marginTop:6})}),Object(p.jsx)("div",{children:e.title}),Object(p.jsx)("div",{style:{fontSize:12,color:"rgba(0, 0, 0, 0.8)"},children:Object(p.jsx)(rt.a,{width:A-100,line:4,text:e.description||"",t:r,fontSize:"14px"})}),!e.image&&!e.title&&!e.description&&Object(p.jsx)("div",{style:{fontSize:12,color:"rgba(0, 0, 0, 0.8)"},children:e.link})]},s)}if("instagram_official"==O&&!e.post_attachments&&e.url)return Object(p.jsx)(at.a,{pages:u,messageId:_,mediaType:e.media_type||"image",mediaUrl:e.url});var z={borderTopRightRadius:4,position:"relative",marginTop:"ad_click"==e.type?3:0},B=e.ad_click_photo_url&&{url:e.ad_click_photo_url}||"zalo"==O&&e||(null===(R=e.post_attachments)||void 0===R?void 0:R[0]),E=v.sameFromBottom?4:"";return z=o.id==g?Ot(Ot({},z),{},{borderBottomRightRadius:E}):Ot(Ot({},z),{},{borderBottomLeftRadius:E}),Object(p.jsx)("div",{className:"render-attachment-link",style:z,children:Object(p.jsxs)("div",{className:"content-attachment",children:[Object(p.jsx)("div",{children:Object(p.jsx)(rt.a,{width:A-100,line:4,text:e.name||e.title+"\n \n"+e.description||"",t:r,fontSize:"14px"})}),B&&Object(p.jsx)("div",{className:"photos-attachment-link",children:Object(p.jsx)(H.a,{index:s,pages:u,isPreview:n,attachment:B,accessToken:k,fromPage:o.id==g,attachmentsCount:C,isPostPhotoPrivateReply:!0,classNames:"message-attachment-item"},s)}),e.url&&("zalo"==O?Object(p.jsx)("a",{className:"link-to-fb-comment",onClick:function(){return window.open(e.url)},children:Object(p.jsx)(mt.a,{id:"".concat(s),title:"Xem tr\xean Zalo",children:Object(p.jsx)("img",{style:{width:20},src:"/static/images/zalo_logov3.png",alt:"zalo logo"})})}):Object(p.jsx)("a",{className:e.post_attachments&&e.post_attachments.length>0?"link-to-fb-comment":"link-to-fb",onClick:function(){return window.open(e.url)},children:Object(p.jsx)(mt.a,{id:"".concat(s),title:r("conversation.viewOnFacebook"),children:Object(p.jsx)(N.a,{style:{fontSize:20,color:"#001d94"},type:"facebook",theme:"filled"})})})),e.post_attachments&&e.post_attachments.length>1&&Object(p.jsx)("div",{className:"count-photo-attachment",children:Object(p.jsx)(mt.a,{id:"".concat(s),title:t.renderMorePhoto(e.post_attachments),children:Object(p.jsx)(m.a,{count:"+ ".concat(e.post_attachments.length-1),style:{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}})})})]})},s);case"voice_media":case"video_inline":case"video":return Object(f.createElement)(Re.a,Ot(Ot({},t.props),{},{key:s,attachment:e,messageId:t.props.id,description:a}));case"business_message_items":case"retail_promotion":return delete e.media,Object(p.jsxs)("div",{style:{display:"grid",backgroundColor:"#f6f3f2",padding:"0px 5px",marginTop:"3px",borderRadius:"7px"},children:[Object(p.jsx)("div",{style:{color:"#006eea",fontWeight:500,fontStyle:"italic"},children:"[Messenger Ads] ".concat(e.title)}),Object(p.jsx)(H.a,{index:s,pages:u,isPreview:n,attachment:e,accessToken:k,fromPage:o.id==g,attachmentsCount:C,classNames:"message-attachment-item ".concat(C>1?o.id==g?"multi-attachments":"multi-attachments-right":"")},s)]});case"attachment":return Object(p.jsx)("div",{style:{color:"#006eea",fontWeight:500,fontStyle:"italic",lineHeight:2,backgroundColor:"#f6f3f2",padding:"0px 5px",marginTop:"3px",borderRadius:"7px"},children:e.name},s);case"animated_image_share":var L=Math.round(e.media.image.width/(e.media.image.height/140));return Object(p.jsx)(F.a,{height:140,width:L,children:Object(p.jsx)("img",{height:140,width:L,src:e.media.image.src})},s);case"template":var W=e.payload;if(!W)return;var X,V=W?W.template_type:null,q=null===W||void 0===W||null===(P=W.product)||void 0===P?void 0:P.elements[0];if(V){switch(V){case"receipt":var U=D.pc.includes(W.currency)?1:100;X=Object(p.jsxs)(l.a,{title:Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{style:{fontSize:12,color:"#90949c"},children:r("conversation.confirmedOrder")}),Object(p.jsx)("p",{style:{fontSize:18,color:"#444950",overflow:"hidden",textOverflow:"ellipsis",textAlign:"right"},children:o.name})]}),style:{width:250},bordered:!1,className:"invoice-card",children:[W.elements.map((function(e,t){return Object(p.jsx)(l.a.Meta,{style:{margin:"5px 0",display:"flex",alignItems:"center"},avatar:null!=e.image_url&&""!=e.image_url?Object(p.jsx)(Me.a,{height:70,width:70,url:e.image_url}):null,title:Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:e.title}),description:Object(p.jsxs)("div",{style:{color:"8d949e"},children:[Object(p.jsx)("p",{children:e.subtitle}),Object(p.jsxs)("p",{children:[r("conversation.count")," ",e.quantity]}),Object(p.jsxs)("p",{children:[r("conversation.createOrder.retailPrice")," ",Object(D.X)((e.price||0)*U,W.currency,!0)]})]})},t)})),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{style:{marginBottom:5},children:[Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, .40)",fontSize:12},children:r("conversation.orderAt")}),Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:Object(D.Y)(W.timestamp,t.props.auth.timezone,!1,"HH:mm DD/MM")})]}),W&&W.address&&Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, .40)",fontSize:12},children:r("conversation.phoneNumber")}),Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:W.address.street_2})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, .40)",fontSize:12},children:r("conversation.paidWith")}),Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:W.payment_method})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, .40)",fontSize:12},children:r("conversation.deliveryTo")}),Object(p.jsx)("div",{style:{color:"rgba(0, 0, 0, 1)",fontWeight:500},children:W.recipient_name}),"-"==W.address.country?Object(p.jsx)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:W.address.street_1}):"-"==W.address.state?Object(p.jsxs)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:[W.address.street_1,", ",W.address.country]}):"-"==W.address.city?Object(p.jsxs)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:[W.address.street_1,", ",W.address.state,", ",W.address.country]}):Object(p.jsxs)("p",{style:{color:"rgba(0, 0, 0, 1)"},children:[W.address.street_1,", ",W.address.city,", ",W.address.state,", ",W.address.country]})]})]}),Object(p.jsx)("hr",{style:{margin:"10px 0"}}),Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(p.jsx)("p",{style:{color:"#8d949e"},children:r("conversation.totalPayment")}),Object(p.jsx)("p",{style:{color:"#444950",fontWeight:"bold"},children:Object(D.X)(W.summary.total_cost*U,W.currency,!0)})]})]})]},s);break;case"button":var G=W.buttons?W.buttons:[];if(G.length>0){var Z={};1==G.length&&a&&(Z.borderTopRightRadius=4),X=G.map((function(e,t){return Object(p.jsx)("div",{className:"button-attachments",style:{marginTop:2,marginBottom:3},children:Object(p.jsx)(x.a,{className:"btn-template-messenger",style:Z,disabled:!0,children:e.title})},t)}))}else X=Object(p.jsx)("div",{style:{backgroundColor:"#ffffea",padding:5,borderRadius:3,opacity:.8,border:"1px solid #ddd"},children:Object(p.jsx)("a",{href:e.url,target:"_blank",children:Object(p.jsxs)("div",{children:[Object(p.jsx)(Y.a,{})," Xem b\xe0i vi\u1ebft"]})})},s);break;case"generic":var J=W.elements,K=!1;if(1!=J.length||J[0].image_url||(K=!0),K){var Q=J[0];X=Object(p.jsxs)("div",{className:"botcake-otn",children:[Object(p.jsx)(l.a,{hoverable:!0,style:{width:"100%",borderBottomRightRadius:0,borderBottomLeftRadius:0},children:Object(p.jsx)(l.a.Meta,{title:Q.title,description:Q.subtitle})}),Object(p.jsx)(x.a,{className:"btn-template-messenger",block:!0,disabled:!0,children:r("conversation.notifyMe")})]},s)}else X=Object(p.jsxs)("div",{className:"botcake-albums",style:{position:"relative"},children:[t.state.indexGeneric>0&&Object(p.jsx)("div",{className:"add-card-left",children:Object(p.jsx)(x.a,{disabled:0==t.state.indexGeneric,icon:"left",onClick:function(){return t.carouselAttachment.prev()}})}),t.state.indexGeneric<J.length-1&&Object(p.jsx)("div",{className:"add-card-right",children:Object(p.jsx)(x.a,{disabled:t.state.indexGeneric==J.length-1,icon:"right",onClick:function(){return t.carouselAttachment.next()}})}),Object(p.jsx)(c.a,{dots:!1,ref:function(e){t.carouselAttachment=e},afterChange:function(e){return t.setState({indexGeneric:e})},children:J.map((function(e,t){var a=e.buttons?e.buttons:[];return Object(p.jsxs)("div",{style:{width:250},children:[Object(p.jsx)(l.a,{hoverable:!0,style:a.length?{width:"100%",borderBottomRightRadius:0,borderBottomLeftRadius:0}:{width:"100%"},cover:Object(p.jsx)("img",{style:{height:250},alt:"example",src:e.image_url}),children:Object(p.jsx)(l.a.Meta,{title:e.title,description:e.subtitle})}),a.map((function(e,t){var s=t!=a.length-1?{borderRadius:"0px"}:{};return Object(p.jsx)(x.a,{style:Ot(Ot({},s),{},{display:"block"}),className:"btn-template-messenger",disabled:!0,children:e.title},t)}))]},t)}))})]},s);break;case"list":var $=W.elements,ee=W.top_element_style;X=Object(p.jsxs)("div",{style:{boxShadow:"0 1px 0.5px rgba(0,0,0,.13)",borderRadius:8,padding:8,background:"white"},children:[$.map((function(e,a){var s=e.buttons?e.buttons:[];return 0==a&&"large"==ee?Object(p.jsxs)("div",{className:"thumbnail",children:[Object(p.jsx)("img",{src:e.image_url}),Object(p.jsxs)("div",{class:"caption",children:[Object(p.jsx)("h3",{children:e.title}),Object(p.jsx)("p",{children:e.subtitle}),Object(p.jsx)("div",{style:{textAlign:"center"},children:s.map((function(e,t){return Object(p.jsx)(x.a,{className:"btn-template-messenger list-type-attachments__button",disabled:!0,children:e.title},t)}))})]})]},a):Object(p.jsxs)("div",{style:{padding:"10px 0",borderBottom:a==$.length-1?"none":"1px solid #d9d9d9"},children:[Object(p.jsxs)("div",{className:"media-body",onMouseEnter:function(){return t.setState({showingAdditionalInfo:!0})},onMouseLeave:function(){return t.setState({showingAdditionalInfo:!1})},children:[Object(p.jsx)("h4",{className:"media-heading",children:Object(p.jsx)("a",{href:e.item_url,target:"_blank",children:e.title})}),Object(p.jsx)("p",{children:e.subtitle}),s.map((function(e,t){return Object(p.jsx)("div",{style:{marginTop:6,width:150},children:Object(p.jsx)(x.a,{className:"btn-template-messenger list-type-attachments__button",disabled:!0,children:e.title})},t)}))]}),Object(p.jsx)("div",{className:"media-right",children:Object(p.jsx)("img",{width:64,height:64,style:{borderRadius:4},src:e.image_url})})]},a)})),W.buttons?W.buttons.map((function(e,t){return Object(p.jsx)(x.a,{style:{borderRadius:0,marginTop:0==t?4:0},className:"btn-template-messenger list-type-attachments__button",disabled:!0,children:e.title},t)})):null]});break;case"media":X=W&&W.elements.map((function(e,t){switch(e.media_type){case"image":return Object(p.jsxs)("div",{className:"attachment-media",children:[Object(p.jsx)("img",{className:"image-attachment",src:e.image_url||e.url}),e.buttons&&Object(p.jsx)("div",{className:"list-action",children:e.buttons.map((function(e){return Object(p.jsx)("div",{className:"btn-action",children:e.title})}))})]},t);case"video":return Object(p.jsxs)("div",{className:"attachment-media",children:[Object(p.jsx)("video",{className:"video-attachment",controls:!0,children:Object(p.jsx)("source",{src:e.url})}),e.buttons&&Object(p.jsx)("div",{className:"list-action",children:e.buttons.map((function(e){return Object(p.jsx)("div",{className:"btn-action",children:e.title})}))})]},t);default:return Object(p.jsx)("div",{style:{width:140,height:140},children:Object(p.jsxs)("div",{className:"thumbnail",target:"_blank",style:{margin:0,cursor:"pointer"},children:[Object(p.jsx)("img",{src:"./static/cc-assets/images/video-icon.png"}),Object(p.jsx)("div",{className:"caption",children:Object(p.jsx)("div",{style:{textAlign:"center",fontSize:16,lineHeight:"10px",color:"#2983C3"},children:"Facebook video"})})]})},t)}}));break;case"whatsapp_business":X=t.renderWhatsappBusinessTemplate(W)}return Object(p.jsx)("div",{className:"attachments-template-ele",children:X},s)}if(q){var te=q.id,ae=q.image_url,se=q.subtitle,ne=q.title;return Object(p.jsxs)("div",{className:"attachments__products-template",children:[Object(p.jsx)("span",{className:"attachments__name",children:ne}),Object(p.jsx)("img",{className:"attachments__img",src:ae,alt:ne}),Object(p.jsx)("span",{className:"attachments__subtitle",children:se})]},te)}break;case"request_customer_address_info":return Object(p.jsxs)("div",{className:"address-container requested-address",children:[Object(p.jsx)(De.a,{id:"address-icon",weight:"fill"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"delivery-address-text",children:r("conversation.customerAddressAttachment.deliveryAddress")}),r("conversation.customerAddressAttachment.sendAddressToCustomer")]})]});case"customer_address_info":var ie=function(e){switch(e){case"name":return Object(p.jsx)(We.a,{});case"phone":return Object(p.jsx)(He.a,{});case"full_address":return Object(p.jsx)(Xe.a,{});case"postal_code":return Object(p.jsx)(Ve.a,{});default:return}};return Object(p.jsxs)("div",{className:"address-container info-address",children:[Object(p.jsxs)("div",{className:"customer-address-header",children:[Object(p.jsxs)("div",{className:"shared-address-text",children:[Object(p.jsx)("span",{style:{fontWeight:500},children:b&&(null===(S=b[0])||void 0===S?void 0:S.name)})," ",r("conversation.customerAddressAttachment.hasShareInfo")]}),Object(p.jsx)("div",{className:"customer-address-text",children:r("conversation.customerAddressAttachment.customerAddress")})]}),Object(p.jsxs)("div",{className:"customer-address-body",children:[Object(p.jsxs)("div",{className:"add-address-to-system-text",children:[Object(p.jsx)("span",{className:"address-attachment-icon",children:Object(p.jsx)(qe.a,{weight:"fill",color:"#597EF7"})}),r("conversation.customerAddressAttachment.addressAddToSystemNote")]}),Object(p.jsx)("div",{children:["name","phone","full_address","postal_code"].map((function(t){return e[t]&&Object(p.jsxs)("div",{className:"detailed-customer-info",children:[Object(p.jsx)("span",{className:"address-attachment-icon",children:ie(t)}),e[t]]})}))}),e.shipping_notes&&Object(p.jsxs)("div",{className:"shipping-notes-info",children:[Object(p.jsx)("span",{className:"address-attachment-icon",children:Object(p.jsx)(Ue.a,{weight:"fill",color:"#D46B08"})}),e.shipping_notes]}),Object(p.jsx)(x.a,{onClick:function(){return d(Object(Qe.H)(_))},className:"create-order-btn",type:"primary",block:!0,children:r("conversation.customerAddressAttachment.quickCreateOrder")})]})]});case"invoice_order_info":var re,ce,oe="paid"==e.status;switch(e.status){case"pending":re=Object(p.jsx)(Ge.a,{color:"#FFBA34",weight:"fill"}),ce=r("conversation.invoiceOrderAttachment.paymentRequested");break;case"paid":re=Object(p.jsx)(Ze.a,{color:"#54BE00",weight:"fill"}),ce=r("conversation.invoiceOrderAttachment.paymentCompleted");break;case"cancelled":re=Object(p.jsx)(Je.a,{color:"#CF1322",weight:"fill"}),ce=r("conversation.invoiceOrderAttachment.paymentCancelled")}var le=Object(p.jsxs)("div",{style:{display:"flex",alignItems:!oe&&"center"},children:[Object(p.jsx)("div",{className:"order-icon",children:re}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"order-amount-text",children:ce}),Object(p.jsx)("div",{className:"order-amount-text",children:Object(D.X)(e.total_amount,"PHP")}),Object(p.jsxs)("div",{className:"order-item",children:["Order ID: ",Object(p.jsx)("span",{children:e.order_id})]}),Object(p.jsxs)("div",{className:"order-item",children:["Invoice ID: ",Object(p.jsx)("span",{children:e.invoice_id})]})]})]});return Object(p.jsxs)("div",{className:"invoice-order-container",children:[oe&&Object(p.jsxs)("div",{className:"order-paid-by",children:[Object(p.jsx)("span",{children:null===j||void 0===j?void 0:j.name})," ",r("conversation.invoiceOrderAttachment.paidForOrder"),Object(p.jsx)("hr",{})]}),le,oe&&Object(p.jsx)(x.a,{onClick:function(){return d(Object(Qe.G)(parseInt(e.display_id)))},className:"order-detail-btn",type:"primary",block:!0,children:r("conversation.invoiceOrderAttachment.orderDetails")})]});case"animated_media":if(e.images&&e.images.fixed_height&&e.images.fixed_height.url){var de=parseInt(e.images.fixed_height.width),me=parseInt(e.images.fixed_height.height),je=de&&me&&Math.round(140*me/de)||140;return Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{style:{width:140,height:je},src:e.images.fixed_height.url}),Object(p.jsx)("div",{})]},s)}case"audio":return Object(f.createElement)(Re.a,Ot(Ot({},t.props),{},{key:s,attachment:e,messageId:t.props.id}));case"document":return Object(p.jsxs)("div",{onClick:function(){t.setState({downloading:!0});var a=new XMLHttpRequest,s=e.url.includes("?")?"".concat(e.url,"&salt=").concat(Math.random()):"".concat(e.url,"?salt=").concat(Math.random());a.open("GET",s+"?salt=".concat((new Date).getTime()),!0),a.responseType="blob";var n=t;a.onload=function(){var t=(window.URL||window.webkitURL).createObjectURL(this.response),a=document.createElement("a");a.href=t,a.download=e.name,a.click(),n.setState({downloading:!1})},a.send()},className:"render-attachment-link",style:{backgroundColor:"#f0f0f0",cursor:"pointer"},children:[Object(p.jsx)(N.a,{type:"file",theme:"filled",style:{color:"#006d75"}})," ",e.name,t.state.downloading&&Object(p.jsx)(N.a,{type:"loading",style:{marginLeft:"5px",color:"#1890ff"}}),null!==e&&void 0!==e&&e.thumb_url?Object(p.jsx)("img",{height:100,width:100,src:null===e||void 0===e?void 0:e.thumb_url,style:{marginLeft:6}}):null]});case"forward_conversation":var he="https://pages.fm/".concat(g,"?c_id=").concat(e.conversation_id);return Object(p.jsx)("div",{className:"render-attachment-link",children:Object(p.jsxs)("a",{href:he,target:"_blank",children:[Object(p.jsx)(Y.a,{}),"\xa0",r("textOnly.viewConversation")]})});case"commerce_product":var pe=(e.products||[]).map((function(e){return{title:e.title,subtitle:e.description,image_url:e.image.url}}));return Object(p.jsx)(it.a,{items:pe});case"loading":return Object(p.jsx)("div",{className:"loading-attachment",children:Object(p.jsx)(i.a,{indicator:Object(p.jsx)(N.a,{type:"loading",style:{fontSize:30},spin:!0})})});case"unsupported":return Object(p.jsx)("div",{style:{color:"rgb(24, 119, 242)",lineHeight:"32px"},children:r(e.code)});default:if(e.generic_template)return Object(p.jsx)("div",{className:"generic-template",children:Object(p.jsxs)(l.a,{className:"card-generic-template",cover:Object(p.jsx)("img",{className:"image-generic-template",alt:"example",src:e.generic_template.media_url}),children:[Object(p.jsx)(l.a.Meta,{className:"card-content",title:e.generic_template.title,description:e.generic_template.subtitle}),Object(p.jsxs)("div",{className:"button-allow",children:[r("allowMessage"),Object(p.jsx)("div",{className:"icon-bell",children:Object(p.jsx)(Ye.a,{size:16})})]})]})});if(e.mime_type&&e.name&&e.size)switch(e.mime_type){case"audio/mpeg":case"audio/mp3":case"audio/mp4":case"audio/aac":case"audio/x-m4r":case"audio/x-wav":return Object(f.createElement)(Re.a,Ot(Ot({},t.props),{},{key:s,attachment:e,messageId:t.props.id}));default:return Object(p.jsxs)("div",{className:"default-attachment-ele",children:[Object(p.jsx)(mt.a,{title:r("download"),children:Object(p.jsxs)("a",{className:"downloadable-attachment",onClick:function(){return t.reloadMessageAttachments(e.id,e.file_url)},children:[e.name,"\xa0",Object(p.jsx)(N.a,{type:"download"})]})}),Object(p.jsx)("div",{children:Object(p.jsx)($e.a,{text:e.mime_type,maxWidth:"100%",nowrap:!0})}),Object(p.jsx)("div",{children:e.size>1e9?"".concat(Math.round(e.size/1e8)/10," GB"):e.size>1e6?"".concat(Math.round(e.size/1e5)/10," MB"):e.size>1e3?"".concat(Math.round(e.size/100)/10," KB"):"".concat(e.size," B")})]},s)}}}))}},{key:"renderActions",value:function(){var e,t=this.props,a=t.type,s=t.from,n=t.pageId,i=t.canLike,r=t.privateReplyConversation,c=t.canReplyPrivately,o=t.isRemoved,l=t.canRemove,d=t.canHide,m=t.id,j=t.editHistory,h=t.removedBy,u=t.isSaving,b=t.userLikes,g=t.isHidden,O=t.isParentHidden,v=t.visibleToggle,x=t.isEditing,f=(t.pinnedPhotos,t.showInboxPreview),y=t.removeComment,_=t.viewOnFB,w=t.likeToggle,k=t.attachments,C=t.auth,A=t.onClickModalShowHistory,R=t.t,P=t.message,S=t.phoneInfo,I=t.recentPhoneNumbers,M=t.pages,T=t.isDummy,z=t.insertedAt,B=t.currentPlatform,E=this.state.selectedPhotos;e=o?Object(D.Db)(h):R("deleteComment");var L=s.id,F=!c&&!r&&r!=={};if("COMMENT"==a){if(L!==n){var H="facebook"==B;return Object(p.jsxs)("div",{className:"render-comment-action",children:[Object(p.jsx)(mt.a,{title:R("toggleLikeStatus"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(Q.a,{className:i?"message-action":"message-action-disabled",style:b&&!o?{color:"#3097d1"}:{},onClick:w&&w.bind(this,m)})}),Object(p.jsx)(mt.a,{title:R("sendMsgToCustomer"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(ne.a,{style:F?{color:"#ddd"}:!c||r?{color:"#3097d1"}:{},onClick:function(){return!F&&f({fromId:s.id,fromName:s.username||s.name,commentId:m},!c||!!r&&r!=={})},className:"message-action"})}),Object(p.jsx)(mt.a,{title:R("toggleVisibilityStatus"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(re.a,{style:g&&!o?{color:"#3097d1"}:{},onClick:v&&v.bind(this,m),className:d?"message-action":"message-action-disabled"})}),H&&Object(p.jsx)(mt.a,{title:R("viewCmtOnFb"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(oe.a,{className:o?"message-action-disabled":"message-action",onClick:_&&_.bind(this,m,O,g,o)})}),j&&Object(p.jsx)(mt.a,{title:R("editHistory"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(de.a,{style:{color:"#3097d1"},className:"message-action",onClick:A&&A.bind(this,j,s)})}),Object(p.jsx)(mt.a,{title:e,overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(je.a,{style:o?{color:"#de343b",cursor:"not-allowed"}:{},onClick:y&&y.bind(this,m,o),className:l?"message-action":"message-action-disabled"})}),Object(p.jsx)(mt.a,{title:R("textOnly.statistics.print"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(N.a,{style:{transform:"translateY(0.5px)",fontSize:"13px"},type:"printer",className:"message-action",onClick:function(){Object(W.a)({message:P,from:s,phone_info:S,recent_phone_numbers:I,inserted_at:z},M.currentPageId,M.activated.find((function(e){return e.id==M.currentPageId})).username,C.timezone)}})})]})}return Object(p.jsxs)("div",{style:{marginTop:3,marginBottom:-3,marginRight:-8,color:"#888",textAlign:"right"},children:[o?null:x?Object(p.jsxs)("div",{style:{display:"-webkit-inline-box"},children:[u?Object(p.jsx)(mt.a,{title:R("saving"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(xe.a,{style:{cursor:"not-allowed",border:"none"},className:"message-action spin"})}):Object(p.jsx)(mt.a,{title:R("saveNewComment"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(Oe.a,{onClick:k.length>0?this.handleSaveMessage.bind(this,k):this.handleSaveMessage.bind(this,[]),className:"message-action"})}),Object(p.jsx)(mt.a,{title:R("notification.cancel"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(pe.a,{onClick:this.toggleEditMode.bind(this,this.state.currentPhoto),className:"message-action"})}),Object(p.jsx)(X.a,{pageId:n,selectedPhotos:E,onSelectedChange:this.handleSelectedPhotosChange,allowMutipleSelect:!1,allowMutipleUpload:!1,t:R,children:Object(p.jsx)(mt.a,{title:R("changeImage"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(ye.a,{className:"message-action"})})})]}):Object(p.jsx)(mt.a,{title:R("editComment"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(be.a,{onClick:k.length>0?this.toggleEditMode.bind(this,k):this.toggleEditMode.bind(this,[]),className:i?"message-action":"message-action-disabled"})}),j?Object(p.jsx)(mt.a,{title:R("editHistory"),overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(de.a,{style:{color:"#3097d1"},className:"message-action",onClick:A&&A.bind(this,j,s)})}):null,Object(p.jsx)(mt.a,{title:e,overlayClassName:"ant-tooltip--sm",children:Object(p.jsx)(je.a,{style:o?{color:"#de343b",cursor:"not-allowed"}:T?{color:"#bdc3c7",cursor:"not-allowed"}:{},onClick:!T&&y&&y.bind(this,m,o),className:l?"message-action":"message-action-disabled"})})]})}}},{key:"showPictureModal",value:function(e){this.setState({show:!0,index:e})}},{key:"handleCancel",value:function(){this.setState({show:!1})}},{key:"isInstagramPlatform",value:function(){var e=this.props.currentPlatform;return["instagram","instagram_official"].includes(e)}},{key:"renderFacebookAction",value:function(){var e=this.props,t=e.conversationId,a=e.id,s=e.insertedAt,n=e.message,i=e.from,r=e.phoneInfo,c=e.recentPhoneNumbers,o=e.pages,l=e.t;return Object(p.jsxs)("div",{className:"facebook-action",children:[Object(p.jsx)(jt.a,{style:{width:16,height:16},onSelect:function(e){return Object(ht.l)({conversationId:t,messageId:a,emoji:e})}}),Object(p.jsx)(mt.a,{title:l("textOnly.statistics.print"),children:Object(p.jsx)(N.a,{style:{transform:"translateY(2px)",marginLeft:5,fontSize:15},type:"printer",onClick:function(){Object(W.a)({message:n,from:i,phone_info:r,recent_phone_numbers:c,inserted_at:s},o.currentPageId,o.activated.find((function(e){return e.id==o.currentPageId})).username)}})})]})}},{key:"renderSystemMessage",value:function(){var e=this.props,t=e.t,a=(e.id,e.attachments),s=e.auth,n=a[0],i=Object(D.Qc)(n.time,s.locale,t);return Object(p.jsx)("div",{className:"media-body system-msg",children:Object(p.jsx)("div",{className:"text",children:i})})}},{key:"hasReactions",value:function(e){switch(this.props.currentPlatform){case"whatsapp":case"facebook":case"zalo":return!!e.length;case"instagram":case"instagram_official":return e.some((function(e){return"love"===e.reaction}))}}},{key:"render",value:function(){var e=this.props;e.attachments;switch(e.type){case"COMMENT":return this.renderCommentMessage();case"SYSTEM_MESSAGE":return this.renderSystemMessage();default:return this.renderInboxMessage()}}}]),a}(f.Component))||s}}]);